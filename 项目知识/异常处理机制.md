---
title: 异常处理机制
type: note
permalink: architecture/异常处理机制
---

# 异常处理机制

## 异常类型
- `ExpressionException` - 表达式相关异常基类
- `ExecuteException` - 执行过程中的异常

## 错误码分类
- `GRAMMAR_ERROR` (1) - 语法错误
- `CALCULATE_ERROR` (2) - 计算错误
- `FORMAT_ERROR` (3) - 格式错误
- `ARG_MISS` (4) - 参数缺失
- `PARAM_MISS` (5) - 参数值缺失

## 异常处理原则
1. 所有类的check方法必须使用ExecuteException作为抛出异常类型，禁止使用ExpressionException
2. 语法分析阶段抛出ExpressionException
3. 执行计算阶段抛出ExecuteException
4. 错误信息应明确指出错误原因

## 异常传播路径
1. 词法分析阶段 -> ExpressionException
2. 语法分析阶段 -> ExpressionException  
3. 表达式执行阶段 -> ExecuteException
4. 函数参数校验 -> ExecuteException