---
title: 测试体系
type: note
permalink: testing/测试体系
---

# 测试体系

## 测试结构
- `src/test/java/com/kejin/` - 基础测试
- `src/test/java/com/kejin/expression/operator/method/MethodOperatorsTest.java` - 方法操作符测试
- `src/test/java/com/kejin/expression/compile/LexicalRunnerTest.java` - 词法分析器测试
- `src/test/java/com/kejin/ArgTest.java` - 参数测试
- `src/test/java/com/kejin/OperatorTest.java` - 操作符测试

## 测试类型

### 单元测试
- 方法操作符测试：覆盖所有内置函数
- 词法分析测试：验证字符串到词法单元的转换
- 语法分析测试：验证词法单元到语法树的构建
- 运算符测试：验证各种运算符功能

### 集成测试
- 表达式编译测试：从字符串到执行的端到端验证
- 参数传递测试：验证变量和参数的处理
- 异常处理测试：验证错误情况下的行为

## 测试工具类
- `TestUtil` - 测试工具类，提供便捷的测试方法
  - `execute(String expression, Object result)` - 执行表达式并验证结果
  - `compileFail(String expression, String errorMessage)` - 验证编译失败情况
  - 预定义参数：I01N-I06N(数字), T01T-T06T(文本), B01B-B02B(布尔), D01N-D06N(小数)

## 测试覆盖范围
- 基本运算符：+、-、*、/、%、^、=、<>、>、<、>=、<=、&&、||
- 单目运算符：!、~
- 方法函数：IF、MAX、MIN、CONCAT、IN、NOT_IN、IS_NULL、日期函数等
- 窗口函数：SUM、AVG、COUNT等
- 错误处理：语法错误、参数错误、计算错误

## 测试最佳实践
- 使用预定义参数简化测试用例
- 验证正常和异常情况
- 测试边界条件和特殊值
- 确保所有异常路径都有对应测试